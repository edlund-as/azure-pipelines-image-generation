resources:
- repo: self
pool:
  name: Hosted VS2017
#Your build pipeline references a secret variable named ‘client_secret’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab, and then select the option to make it secret. See https://go.microsoft.com/fwlink/?linkid=865972
#Your build pipeline references an undefined variable named ‘managed_image_prefix’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972

variables:
  client_id: 'clientID'
  tenant_id: 'tenantID'
  subscription_id: 'subID'  

steps:
- task: PackerBuild@1
  inputs:
    templateType: 'custom'
    customTemplateLocation: 'images\win\vs2019-Server2019-Azure.json'
    customTemplateParameters: '{"client_id":"$(client_id)","client_secret":"$(client_secret)","tenant_id":"$(tenant_id)","subscription_id":"$(subscription_id)","managed_image_prefix":"$(managed_image_prefix)","managed_image_resource_group_name":"$(managed_image_resource_group_name)","PackageLocation":"$(PackageLocation)"}'
    baseImageSource: 'customVhd'
    imageUri: '$imageURL'



